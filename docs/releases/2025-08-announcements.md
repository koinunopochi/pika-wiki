# お知らせ機能の実装について

2025年8月7日

## 概要

pika-wikiに新しく「お知らせ機能」を実装しました。この機能により、システムメンテナンスや新機能リリースなどの重要な情報をユーザーに効率的に伝えることができるようになります。

## なぜこの機能が必要だったのか

### 課題

これまでpika-wikiには、以下のような課題がありました：

- **情報伝達の非効率性**: システムメンテナンスや新機能の告知を効果的に行う方法がなかった
- **管理の煩雑さ**: お知らせを追加・更新するたびにコードを変更する必要があった
- **古い情報の蓄積**: 期限切れのお知らせが残り続ける問題

### 解決策

これらの課題を解決するため、以下の機能を実装しました：

1. **API経由でのお知らせ配信**
   - `/api/tools/announcements`エンドポイントでお知らせを取得
   - JSONフォーマットで構造化されたデータを提供

2. **自動アーカイブ機能**
   - 30日以上経過したお知らせを自動的にアーカイブ
   - `/api/tools/archive`エンドポイントでアーカイブ処理を実行

3. **柔軟なデータ管理**
   - R2ストレージを活用した外部データ管理
   - コード変更なしでお知らせの更新が可能

## 実装の詳細

### アーキテクチャ

```text
data/
└── announcements/
    ├── current.json    # 現在のお知らせ
    └── archive.json    # アーカイブされたお知らせ
```

### データ構造

お知らせは以下の構造を持ちます：

```json
{
  "id": "一意のID",
  "title": "タイトル",
  "content": "本文",
  "date": "ISO 8601形式の日時",
  "priority": "info | warning | critical",
  "links": [
    {
      "url": "関連リンクURL",
      "text": "リンクテキスト"
    }
  ]
}
```

### 使用方法

#### お知らせの取得

```bash
curl https://pika.lynxes.org/api/tools/announcements
```

#### アーカイブの実行

```bash
curl -X POST https://pika.lynxes.org/api/tools/archive
```

## 今後の展望

### 短期的な改善

- **UI統合**: フロントエンドでのお知らせ表示コンポーネント
- **通知機能**: 重要度に応じた通知方法の実装
- **多言語対応**: 国際化のサポート

### 長期的な計画

- **RSS/Atomフィード**: 外部サービスとの連携
- **Webhook統合**: SlackやDiscordへの自動通知
- **分析機能**: お知らせの閲覧状況の可視化

## フィードバック

この機能に関するフィードバックや改善提案は、GitHubのIssuesまたはPull Requestでお寄せください。

## 謝辞

この機能の実装にあたり、貴重なフィードバックをいただいたコミュニティの皆様に感謝いたします。

---

*このドキュメントは2025年8月7日に作成されました。*
